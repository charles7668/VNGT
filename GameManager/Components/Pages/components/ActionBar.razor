@inherits MudComponentBase

<MudPaper @attributes="UserAttributes!" Class="@Class">
    <MudToolBar Class="align-center">
        <MudTextField T="string" @bind-Value="SearchText" Placeholder="Search"></MudTextField>
        <MudButton Variant="Variant.Outlined" StartIcon="@Icons.Material.Filled.Search" OnClick="OnSearch">Search</MudButton>
        <MudSpacer></MudSpacer>
        <MudButton Variant="Variant.Outlined" StartIcon="@Icons.Material.Filled.Add" OnClick="OnAddNewGame">Add</MudButton>
    </MudToolBar>
</MudPaper>

@code {
    private string? SearchText { get; set; }

    [Parameter]
    public EventCallback<string> AddNewGameEvent { get; set; }

    [Parameter]
    public EventCallback<string?> SearchEvent { get; set; }

    private async Task OnAddNewGame()
    {
        var customFileType = new FilePickerFileType(new Dictionary<DevicePlatform, IEnumerable<string>>
        {
            { DevicePlatform.WinUI, new[] { ".exe" } },
        });

        var options = new PickOptions
        {
            PickerTitle = "Please select game exe file",
            FileTypes = customFileType,
        };

        var result = await FilePicker.PickAsync(options);
        if (result == null)
        {
            return;
        }

        if (AddNewGameEvent.HasDelegate)
        {
            await AddNewGameEvent.InvokeAsync(result.FullPath);
        }
    }

    private async Task OnSearch()
    {
        if (SearchEvent.HasDelegate)
        {
            await SearchEvent.InvokeAsync(SearchText);
        }
    }

}

<style>
    .mud-text-field {
        padding: 0px;
    }
</style>